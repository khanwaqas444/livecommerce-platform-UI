<div class="page-wrap">

  <!-- HEADER -->
  <div class="header-title">
    <h1>Live Streams</h1>
    
    <p>
      Manage your live streams and engage with customers in real-time</p>
    <div class="top-action">
      <button class="btn small outline">Schedule Stream</button>
    </div>
  </div>

  <!-- HERO BANNER (uses uploaded image) -->
  <div class="hero">
    <div class="hero-left">
      <div class="hero-icon">ğŸ¥</div>
      <h2>Ready to Go Live?</h2>
      <p class="hero-sub">
        Start streaming now and showcase your products to customers.
        Connect, engage, and drive more reservations in real-time.
      </p>

      <div class="hero-actions">
        <button class="btn live" (click)="show('setup')">ğŸ”´ Go Live Now</button>
        <button class="btn white" (click)="show('setup')">ğŸ“± Use Mobile App</button>
      </div>
    </div>

    <div class="hero-right">
      <!-- using the uploaded file path you supplied; your system will map this to a served URL -->
      <img src="/mnt/data/0e1c755c-d8eb-4d30-b0ab-7455b0194585.png" class="hero-img" alt="hero"/>
    </div>
  </div>

  <!-- STATS ROW -->
  <div class="stats-row">
    <div class="stat">
      <div class="stat-top"><span class="stat-emoji">ğŸ“Š</span><span class="stat-badge">+12%</span></div>
      <div class="num">{{ stats.totalStreams }}</div>
      <div class="label">Total Streams This Month</div>
    </div>

    <div class="stat">
      <div class="stat-top"><span class="stat-emoji">â±ï¸</span><span class="stat-badge">+18%</span></div>
      <div class="num">{{ stats.watchHours }}</div>
      <div class="label">Total Watch Hours</div>
    </div>

    <div class="stat">
      <div class="stat-top"><span class="stat-emoji">ğŸ‘¥</span><span class="stat-badge">+15%</span></div>
      <div class="num">{{ stats.avgViewers }}</div>
      <div class="label">Average Viewers</div>
    </div>

    <div class="stat">
      <div class="stat-top"><span class="stat-emoji">ğŸ§¾</span><span class="stat-badge">+23%</span></div>
      <div class="num">{{ stats.reservations }}</div>
      <div class="label">Reservations Generated</div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs large">
    <button (click)="show('list')" [class.active]="currentView==='list'">Past Streams <span class="tab-counter">24</span></button>
    <button (click)="show('setup')" [class.active]="currentView==='setup'">Setup</button>
    <button (click)="show('analytics')" [class.active]="currentView==='analytics'">Analytics</button>
    <button (click)="show('recordings')" [class.active]="currentView==='recordings'">Recordings</button>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- LIST VIEW -->
    <section *ngIf="currentView === 'list'">
      <div class="table-card header-row">
        <div class="table-top-left"><strong>Past Streams</strong></div>
        <div class="table-top-right">
          <button class="btn small outline">ğŸ“¤ Export</button>
        </div>
      </div>

      <div class="table-card">
        <table>
          <thead>
            <tr>
              <th>Stream</th>
              <th>Date & Duration</th>
              <th>Peak</th>
              <th>Views</th>
              <th>Products Pinned</th>
              <th>Reservations</th>
              <th>Actions</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let s of streams">
              <td class="stream-cell">
                <div class="thumb">ğŸï¸</div>
                <div class="stream-info">
                  <div class="title">{{ s.title || 'Untitled' }}</div>
                  <div class="muted small">ğŸ“‚ {{ s.category || 'Electronics' }} Â· Live Stream</div>
                </div>
              </td>

              <td>
                <div>{{ s.startedAt ? (s.startedAt | date:'MMM d, y') : '--' }}</div>
                <div class="muted small">{{ formatDuration(s.startedAt, s.endedAt) }}</div>
              </td>

              <td>ğŸ‘¥ {{ s.peakViewers || 0 }}</td>
              <td>ğŸ‘ï¸ {{ s.totalViewers || 0 }}</td>
              <td>ğŸ”– {{ s.productsPinned || 0 }}</td>
              <td>ğŸ“… {{ s.totalOrders || 0 }}</td>
              <td>
                <button class="btn small" (click)="openAnalyticsFor(s.id)">ğŸ“ˆ Analytics</button>
                <button class="btn small outline">â¬‡ï¸ Download</button>
              </td>
            </tr>

            <tr *ngIf="streams.length === 0">
              <td colspan="7" class="center muted">No streams to show.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section *ngIf="currentView==='setup'"><app-stream-setup></app-stream-setup></section>
    <section *ngIf="currentView==='analytics'"><app-stream-analytics></app-stream-analytics></section>
    <section *ngIf="currentView==='recordings'"><app-recordings></app-recordings></section>

  </div>
</div>
